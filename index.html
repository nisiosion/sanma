<script>

let winType = "ロン";
let player = "子";
let han = "1";

const ronBtn = document.getElementById("ronBtn");
const tsumoBtn = document.getElementById("tsumoBtn");
const koBtn = document.getElementById("koBtn");
const oyaBtn = document.getElementById("oyaBtn");
const hanButtons = document.querySelectorAll(".han");

const scoreTable = {
  "ロン": {
    "子": ["1000","2000","4000","8000","12000","16000","24000","32000"],
    "親": ["1500","3000","6000","12000","18000","24000","36000","48000"]
  },
  "ツモ": {
    "子": ["1000A","1000A","1000/3000","3000/5000","4000/8000","6000/10000","8000/16000","10000/22000"],
    "親": ["1000A","2000A","3000A","6000A","9000A","12000A","18000A","24000A"]
  }
};

function updateScore(){
  const hanIndexMap = {
    "1":0,
    "2":1,
    "3":2,
    "4-5":3,
    "6-7":4,
    "8-9-10":5,
    "11-12":6,
    "13+":7
  };

  const index = hanIndexMap[han];
  document.getElementById("result").innerText =
    scoreTable[winType][player][index];
}

function setActive(group, active){
  group.forEach(btn=>{
    btn.classList.remove("select");
    btn.classList.add("normal");
  });
  active.classList.add("select");
  active.classList.remove("normal");
}

/* --- ロン/ツモ --- */
ronBtn.addEventListener("click",()=>{
  winType="ロン";
  setActive([ronBtn,tsumoBtn], ronBtn);
  updateScore();
});

tsumoBtn.addEventListener("click",()=>{
  winType="ツモ";
  setActive([ronBtn,tsumoBtn], tsumoBtn);
  updateScore();
});

/* --- 子/親 --- */
koBtn.addEventListener("click",()=>{
  player="子";
  setActive([koBtn,oyaBtn], koBtn);
  updateScore();
});

oyaBtn.addEventListener("click",()=>{
  player="親";
  setActive([koBtn,oyaBtn], oyaBtn);
  updateScore();
});

/* --- ハン数 --- */
hanButtons.forEach(btn=>{
  btn.addEventListener("click",()=>{
    han = btn.innerText;
    setActive(hanButtons, btn);
    updateScore();
  });
});

/* --- 初期状態 --- */
setActive([ronBtn,tsumoBtn], ronBtn);
setActive([koBtn,oyaBtn], koBtn);
setActive(hanButtons, hanButtons[0]);
updateScore();

</script>
